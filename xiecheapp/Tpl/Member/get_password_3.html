<layout name='layout_new' />
<link rel="stylesheet" type="text/css" href="__PUBLIC__/common/css/reset.css?v={$Think.config.VERSION_DATE}" />
<link rel="stylesheet" type="text/css" href="__PUBLIC__/{$Think.const.TOP_NAME}/css/fp.css?v={$Think.config.VERSION_DATE}" />
<div class="container">
	<div class="fp-progress progress-3"></div>
	<div class="form-container">
		<form action="__APP__/member/save_new_password" method="post" class="fp-form" autocomplete="off">
			<ul>
				<li>
					<label for="">新密码：</label>

					<div style="width: 800px">
						<input type="password" class="text pass" name="password" style="width: 400px;" value="">

						<div class="tips"></div>
						<div class="error">5-20位字符（字母、数字、符号），区分大小写</div>
					</div>

					
				</li>
				<li>
					<label for="">确认新密码：</label>
					<div  style="width: 800px">


						<input type="password" name="repassword" class="text confirm-pass" style="width: 400px;" value="">
						<div class="tips"></div>
						<div class="error">与密码输入不一致</div>

						<input type="hidden" name="uid" value="{$uid}" />
					</div>
				</li>
				<li>
					<div class="next-trigger">
						<a href="#" class="disable">下一步</a>
					</div>
				</li>
			</ul>
		</form>
	</div>
</div>
<script src="__PUBLIC__/common/js/libs/jquery/jquery-1.11.min.js"></script>
<script>

 	
  (function($){
     


	$(".pass")
	.focus(function(){
		$(this).val("");
	})
	.blur(function(){
		if($.trim($(this).val()).length > 4 && $.trim($(this).val()).length < 20){
			$(this).siblings(".error").hide();
  			$(this).removeClass("error-outline");
  			$(this).data("filled","1");
		}else{
			$(this).siblings(".error").show();
  			$(this).siblings(".error").show();
          	$(this).data("filled","0");
		}
	})
	.keyup(function(){
		if($.trim($(this).val()).length > 4 && $.trim($(this).val()).length < 20){
			$(this).siblings(".error").hide();
  			$(this).removeClass("error-outline");
  			$(this).data("filled","1");
		}else{
			$(this).siblings(".error").show();
  			$(this).siblings(".error").show();
          	$(this).data("filled","0");
		}
		checkAllFilled()
	});

	$(".confirm-pass").focus(function(){
		$(this).val("");
	})
	.blur(function(){
		if($.trim($(this).val()) == $.trim($(".pass").val()) ){
			$(this).siblings(".error").hide();
  			$(this).removeClass("error-outline");
  			$(this).data("filled","1");
		}else{
  			$(this).siblings(".error").show();
  			$(this).addClass("error-outline");
          	$(this).data("filled","0");
		}
	}).keyup(function(){
		if($.trim($(this).val()) == $.trim($(".pass").val()) ){
			$(this).siblings(".error").hide();
  			$(this).removeClass("error-outline");
  			$(this).data("filled","1");
		}else{
  			$(this).siblings(".error").show();
  			$(this).addClass("error-outline");
          	$(this).data("filled","0");
		}
		checkAllFilled()
	})

  })(jQuery)

  function checkAllFilled(){
		
		if($(".pass").data("filled") == 1 && $(".confirm-pass").data("filled") == 1){
			$(".next-trigger a").removeClass("disable").on("click",function(e){
				e.preventDefault()
				$(".fp-form").submit();
			})
		}else{
			$(".next-trigger a").addClass("disable");
		}
		
	}

</script>